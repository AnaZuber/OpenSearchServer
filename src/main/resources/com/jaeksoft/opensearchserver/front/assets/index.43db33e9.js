(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{10:function(e,t,a){},11:function(e,t,a){"use strict";a.r(t);var l=a(0),n=a.n(l),s=a(3);a(9),a(10);function c(e){return e.selectedView===e.view?n.a.createElement("li",{className:"nav-item active"},n.a.createElement("a",{className:"nav-link",href:"#"},e.view," ",n.a.createElement("span",{className:"sr-only"},"(current)"))):n.a.createElement("li",{className:"nav-item"},n.a.createElement("a",{className:"nav-link",onClick:()=>e.setSelectedView(e.view),href:"#"},e.view))}var d=e=>n.a.createElement("nav",{className:"navbar sticky-top navbar-light navbar-expand bg-light p-0"},n.a.createElement("span",{className:"navbar-brand text-secondary"},n.a.createElement("small",null,"OpenSearchServer 2.0")),n.a.createElement("div",{className:"collapse navbar-collapse"},n.a.createElement("ul",{className:"navbar-nav mr-auto"},n.a.createElement(c,{selectedView:e.selectedView,setSelectedView:e.setSelectedView,view:"Schema"}),n.a.createElement(c,{selectedView:e.selectedView,setSelectedView:e.setSelectedView,view:"Index"}),n.a.createElement(c,{selectedView:e.selectedView,setSelectedView:e.setSelectedView,view:"Query"}))));const r=e=>n.a.createElement("button",{className:"btn btn-danger shadow-none rounded-0",type:"button",onClick:()=>e.doDelete(e.name)},"Delete"),m=e=>e.name?n.a.createElement("button",{className:"btn btn-primary shadow-none rounded-0",type:"button",onClick:()=>e.doCreate(e.name)},"Create"):n.a.createElement("button",{className:"btn btn-primary shadow-none rounded-0",type:"button",disabled:!0},"Create");var i=e=>e.name&&e.name===e.selectedName?n.a.createElement(r,{name:e.name,doDelete:e.doDelete}):n.a.createElement(m,{name:e.name,doCreate:e.doCreate});var o=e=>n.a.createElement("div",{className:"input-group p-1"},n.a.createElement("input",{type:"text",className:"form-control shadow-none","aria-label":"name","aria-describedby":"create",value:e.name,onChange:t=>e.setName(t.target.value)}),n.a.createElement(i,{name:e.name,selectedName:e.selectedName,doDelete:t=>e.doDelete(t),doCreate:t=>e.doCreate(t)}));function u(e){return e.spinning?n.a.createElement("div",{className:"spinner-border spinner-border-sm",role:"status"},n.a.createElement("span",{className:"sr-only"},"Loading...")):""}var h=function(e){return Object(l.useEffect)(()=>{},[e.error,e.task,e.spinning]),e.error&&e.task?n.a.createElement(n.a.Fragment,null,n.a.createElement(u,{spinning:e.spinning}),n.a.createElement("div",{className:"text-danger float-right"},n.a.createElement("small",null,e.task,": ",e.error))):e.error?n.a.createElement(n.a.Fragment,null,n.a.createElement(u,{spinning:e.spinning}),n.a.createElement("div",{className:"text-danger float-right"},n.a.createElement("small",null,e.error))):e.task?n.a.createElement(n.a.Fragment,null,n.a.createElement(u,{spinning:e.spinning}),n.a.createElement("div",{className:"text-success float-right"},n.a.createElement("small",null,e.task))):n.a.createElement(n.a.Fragment,null,n.a.createElement(u,{spinning:e.spinning})," ")};const S=e=>e.selectedValue===e.value?n.a.createElement("tr",{className:"table-active",onClick:()=>e.doSelectValue(e.value)},n.a.createElement("td",{className:"p-1 m-1"},e.doGetKey(e.value))):n.a.createElement("tr",{onClick:()=>e.doSelectValue(e.value)},n.a.createElement("td",{className:"p-1 m-1"},e.doGetKey(e.value)));var E=e=>{if(!e.values)return null;const t=(Array.isArray(e.values)?e.values:Object.keys(e.values)).map((t,a)=>n.a.createElement(S,{key:a,s:!0,value:t,selectedValue:e.selectedValue,doSelectValue:t=>e.doSelectValue(t),doGetKey:t=>e.doGetKey(t)}));return n.a.createElement("table",{className:"table table-hover table-sm table-striped"},n.a.createElement("tbody",null,t))};function b(e,t,a,l){fetch(e,t).then(e=>Promise.all([e.ok,e.json()])).then(([e,t])=>e?a(t):l(t.message)).catch(e=>l(e.message))}var f=e=>{const[t,a]=Object(l.useState)(null),[s,c]=Object(l.useState)(null),[d,r]=Object(l.useState)(!1),[m,i]=Object(l.useState)([]),[u,S]=Object(l.useState)("");return Object(l.useEffect)(()=>{f()},[]),n.a.createElement("div",{className:"border p-0 mt-1 ml-1 bg-light rounded"},n.a.createElement("div",{className:"bg-light text-secondary p-1"},"SCHEMAS ",n.a.createElement(h,{task:t,error:s,spinning:d})),n.a.createElement(o,{name:u,setName:e=>S(e),selectedName:e.selectedSchema,doCreate:t=>function(t){p("Creating schema "+t),b(e.oss+"/ws/indexes/"+t,{method:"POST"},a=>{v("Schema created"),S(""),e.setSelectedSchema(t),f()},e=>v(null,e.message))}(t),doDelete:t=>function(t){p("Deleting schema "+t),b(e.oss+"/ws/indexes/"+t,{method:"DELETE"},t=>{e.setSelectedSchema(null),v("Schema deleted"),f()},e=>v(null,e.message))}(t)}),n.a.createElement(E,{values:m,selectedValue:e.selectedSchema,doSelectValue:t=>e.setSelectedSchema(t),doGetKey:e=>e}));function f(){p(),b(e.oss+"/ws/indexes",null,e=>{v(),i(e)},e=>v(null,e.message))}function p(e){r(!0),e&&(a(e),c(null))}function v(e,t){r(!1),e&&a(e),t?c(t):e&&c(null)}};var p=function(e){const[t,a]=Object(l.useState)(null),[s,c]=Object(l.useState)(null),[d,r]=Object(l.useState)(!1),[m,i]=Object(l.useState)([]),[u,S]=Object(l.useState)("");return Object(l.useEffect)(()=>{f()},[e.selectedSchema]),e.selectedSchema?n.a.createElement("div",{className:"border p-0 mt-1 ml-1 bg-light rounded"},n.a.createElement("div",{className:"bg-light text-secondary p-1"},"INDICES ",n.a.createElement(h,{task:t,error:s,spinning:d})),n.a.createElement(o,{name:u,setName:e=>S(e),selectedName:e.selectedIndex,doCreate:t=>function(t){if(!e.selectedSchema)return void v(null,"Please select a schema");p("Creating index "+t),b(e.oss+"/ws/indexes/"+e.selectedSchema+"/"+u,{method:"POST"},a=>{v("Index created"),S(""),e.setSelectedIndex(t),f()},e=>v(null,e.message))}(t),doDelete:t=>function(t){if(!e.selectedSchema)return v(null,"No schema is selected");p("Deleting index "+t),b(e.oss+"/ws/indexes/"+e.selectedSchema+"/"+t,{method:"DELETE"},t=>{e.setSelectedIndex(null),v("Index deleted"),f()},e=>v(null,e))}(t)}),n.a.createElement(E,{values:m,selectedValue:e.selectedIndex,doSelectValue:t=>e.setSelectedIndex(t),doGetKey:e=>e})):null;function f(){const t=e.selectedSchema;t&&(p(),b(e.oss+"/ws/indexes/"+t,null,e=>{v(),i(e)},e=>v(null,e.message)))}function p(e){r(!0),e&&(a(e),c(null))}function v(e,t){r(!1),e&&a(e),t?c(t):e&&c(null)}};var v=e=>{const[t,a]=Object(l.useState)(!0),[s,c]=Object(l.useState)(!1),[d,r]=Object(l.useState)(!1),[m,o]=Object(l.useState)(!1),[u,h]=Object(l.useState)("text"),[S,E]=Object(l.useState)("");function b(e){const t="attr"+e.attributeKey;return n.a.createElement("div",{key:t,className:"form-check form-check-inline"},n.a.createElement("input",{className:"form-check-input",type:"checkbox",id:t,value:e.attributeKey,checked:e.checked,onChange:t=>e.setAttribute(t.target.checked)}),n.a.createElement("label",{className:"form-check-label",htmlFor:t},e.attributeLabel))}const f=["text","integer","long","double","float"].map(e=>n.a.createElement("option",{key:e,value:e},e));function p(e){return n.a.createElement("select",{className:"custom-select shadow-none rounded-0",value:e.value,onChange:t=>e.setValue(t.target.value)},f)}const v=["","lowercase","ascii","arabic","bulgarian","cjk","czech","danish","dutch","english","french","finnish","german","greek","hindi","hungarian","irish","italian","lithuanian","latvian","norwegian","polish","portuguese","romanian","russian","spanish","swedish","turkish"].map(e=>n.a.createElement("option",{key:e,value:e},e));function x(e){return n.a.createElement("select",{className:"custom-select shadow-none rounded-0",value:e.value,onChange:t=>e.setValue(t.target.value)},v)}return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"input-group p-1"},n.a.createElement("input",{type:"text",className:"form-control shadow-none rounded-0","aria-label":"edit field name","aria-describedby":"edit field name",value:e.editFieldName,onChange:t=>e.setEditFieldName(t.target.value)}),n.a.createElement("div",{className:"input-group-append"},n.a.createElement(p,{value:u,setValue:e=>h(e)}),n.a.createElement(x,{value:S,setValue:e=>E(e)}),n.a.createElement(i,{name:e.editFieldName,selectedName:e.selectedField,doDelete:t=>e.doDeleteField(t),doCreate:a=>{return l=a,void e.doCreateField(l,{type:u.toUpperCase(),stored:s,index:t,facet:d,sort:m,analyzer:""===S?null:S});var l}}))),n.a.createElement("div",{className:"p-1"},n.a.createElement(b,{checked:t,attributeKey:"index",attributeLabel:"indexed",setAttribute:e=>a(e)}),n.a.createElement(b,{checked:s,attributeKey:"stored",attributeLabel:"stored",setAttribute:e=>c(e)}),n.a.createElement(b,{checked:d,attributeKey:"facet",attributeLabel:"faceted",setAttribute:e=>r(e)}),n.a.createElement(b,{checked:m,attributeKey:"sort",attributeLabel:"sorted",setAttribute:e=>o(e)})))};var x=e=>e.value?n.a.createElement("span",{className:"badge badge-dark"},e.true):n.a.createElement("span",{className:"badge badge-light"},e.false);const g=e=>{if(Object(l.useEffect)(()=>{},[e.fields]),!e.fields)return null;const t=Object.keys(e.fields).map((t,a)=>n.a.createElement(N,{key:a,fieldName:t,fieldProperties:e.fields[t],selectedField:e.selectedField,doSelectField:t=>e.doSelectField(t)}));return n.a.createElement("table",{className:"table table-hover table-sm table-striped table-light"},n.a.createElement("thead",{className:"thead-light"},n.a.createElement("tr",null,n.a.createElement("th",null,"Name"),n.a.createElement("th",null,"Type"),n.a.createElement("th",null,"Analyzer"),n.a.createElement("th",null,"Attributes"))),n.a.createElement("tbody",null,t))},N=e=>e.selectedField===e.fieldName?n.a.createElement("tr",{className:"table-active",onClick:()=>e.doSelectField(e.fieldName)},n.a.createElement(y,{fieldName:e.fieldName,fieldProperties:e.fieldProperties})):n.a.createElement("tr",{onClick:()=>e.doSelectField(e.fieldName)},n.a.createElement(y,{fieldName:e.fieldName,fieldProperties:e.fieldProperties})),y=e=>n.a.createElement(n.a.Fragment,null,n.a.createElement("td",{className:"p-1 m-0"},e.fieldName),n.a.createElement("td",{className:"p-1 m-0 text-lowercase"},e.fieldProperties.type),n.a.createElement("td",{className:"p-1 m-0 text-lowercase"},e.fieldProperties.analyzer),n.a.createElement("td",{className:"p-1 m-0"},n.a.createElement(x,{true:"indexed",false:"indexed",value:e.fieldProperties.index}),n.a.createElement(x,{true:"stored",false:"stored",value:e.fieldProperties.stored}),n.a.createElement(x,{true:"sorted",false:"sorted",value:e.fieldProperties.sort}),n.a.createElement(x,{true:"facet",false:"facet",value:e.fieldProperties.facet})));var I=e=>{const[t,a]=Object(l.useState)(null),[s,c]=Object(l.useState)(null),[d,r]=Object(l.useState)(!1),[m,i]=Object(l.useState)({}),[o,u]=Object(l.useState)("");return Object(l.useEffect)(()=>{S()},[e.selectedSchema,e.selectedIndex]),e.selectedSchema&&e.selectedIndex?n.a.createElement("div",{className:"border p-0 mt-1 ml-1 bg-light rounded"},n.a.createElement("div",{className:"bg-light text-secondary p-1"},"FIELDS ",n.a.createElement(h,{task:t,error:s,spinning:d})),n.a.createElement(v,{editFieldName:o,setEditFieldName:e=>u(e),selectedField:e.selectedField,doCreateField:(t,a)=>function(t,a){E("Creating field "+t),b(e.oss+"/ws/indexes/"+e.selectedSchema+"/"+e.selectedIndex+"/fields/"+t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)},a=>{f("Field created"),u(""),e.setSelectedField(t),S()},e=>f(null,e))}(t,a),doDeleteField:t=>function(t){E("Deleting field "+t),b(e.oss+"/ws/indexes/"+e.selectedSchema+"/"+e.selectedIndex+"/fields/"+t,{method:"DELETE"},t=>{f("Field deleted"),e.setSelectedField(null),S()},e=>f(null,e))}(t)}),n.a.createElement(g,{oss:e.oss,fields:m,selectedField:e.selectedField,doSelectField:t=>e.setSelectedField(t)})):null;function S(){const t=e.selectedSchema,a=e.selectedIndex;a&&t&&(E(),b(e.oss+"/ws/indexes/"+t+"/"+a+"/fields",null,e=>{f(),i(e)},e=>f(null,e.message)))}function E(e){r(!0),e&&(a(e),c(null))}function f(e,t){r(!1),e&&a(e),t?c(t):e&&c(null)}};var O=e=>n.a.createElement("div",{className:"d-flex"},n.a.createElement(f,{oss:e.oss,selectedSchema:e.selectedSchema,setSelectedSchema:e.setSelectedSchema}),n.a.createElement(p,{oss:e.oss,selectedSchema:e.selectedSchema,selectedIndex:e.selectedIndex,setSelectedIndex:e.setSelectedIndex}),n.a.createElement(I,{oss:e.oss,selectedSchema:e.selectedSchema,selectedIndex:e.selectedIndex,selectedField:e.selectedField,setSelectedField:e.setSelectedField}));var w=e=>{const[t,a]=Object(l.useState)(!1),[s,c]=Object(l.useState)([]),[d,r]=Object(l.useState)(null);Object(l.useEffect)(()=>{a(!0),fetchJson("/ws/indexes",null,e=>{a(!1),c(e)},e=>{a(!1),r(e.message)})},[]);const m=s.map((e,t)=>n.a.createElement("option",{key:t,value:e},e));return n.a.createElement(n.a.Fragment,null,n.a.createElement("label",{className:"sr-only",htmlFor:e.id},"Schema :"),n.a.createElement("select",{id:e.id,className:"custom-select",value:e.selectedSchema,onChange:t=>e.setSelectedSchema(t.target.value)},n.a.createElement("option",{value:""},"Select a schema"),m,"''"))};var j=e=>{const t=Object(l.useContext)(OssContext),[a,s]=Object(l.useState)(null),[c,d]=Object(l.useState)(null),[r,m]=Object(l.useState)(!1);return Object(l.useEffect)(()=>{e.indexJson||o()},[e.selectedSchema,e.selectedIndex]),n.a.createElement("div",{className:"p-1 h-100"},n.a.createElement("div",{className:"h-100 d-flex flex-column border bg-light rounded"},n.a.createElement("div",{className:"bg-light text-secondary p -1"},"INDEXING ",n.a.createElement(h,{task:c,error:a,spinning:r})),n.a.createElement("div",{className:"flex-grow-1 p-1"},n.a.createElement("div",{className:"h-100 d-flex"},n.a.createElement("div",{className:"w-100 h-100"},n.a.createElement("textarea",{className:"form-control-sm h-100 w-100",style:{resize:"none"},value:e.indexJson,onChange:t=>e.setIndexJson(t.target.value)})))),n.a.createElement("form",{className:"form-inline pr-1 pb-1"},n.a.createElement("div",{className:"pl-1"},n.a.createElement(w,{id:"selectSchema",selectedSchema:e.selectedSchema,setSelectedSchema:e.setSelectedSchema})),n.a.createElement("div",{className:"pl-1"},n.a.createElement(IndexList,{id:"selectIndex",selectedSchema:e.selectedSchema,selectedIndex:e.selectedIndex,setSelectedIndex:e.setSelectedIndex})),n.a.createElement("div",{className:"pt-1 pl-1"},n.a.createElement("button",{className:"btn btn-outline-primary",onClick:()=>o()},"Generate example")),n.a.createElement("div",{className:"pt-1 pl-1"},n.a.createElement("button",{className:"btn btn-primary",onClick:()=>function(){if(!i())return;s(null),d("Parsing..."),m(!0);var a=null;try{a=function(){const t=e.indexJson;if(null===t||""===t)throw"Nothing to index";return JSON.parse(t)}(),e.setIndexJson(JSON.stringify(a,void 0,2))}catch(e){return s(e.message),d(null),void m(!1)}fetchJson(t.url+"/ws/indexes/"+e.selectedSchema+"/"+e.selectedIndex+"/json",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)},e=>{var t;switch(e){case 0:t="Nothing has been indexed.";break;case 1:t="One record has been indexed.";break;default:t=e+" records have been indexed."}d(t),m(!1)},e=>{s(e),d(null),m(!1)})}()},"INDEX")))));function i(){return null==e.selectedSchema||""===e.selectedSchema?(s("Please select a schema."),!1):null!=e.selectedIndex&&""!==e.selectedIndex||(s("Please select an index."),!1)}function o(){i()&&(s(null),d("Collecting sample..."),m(!0),fetchJson(t.url+"/ws/indexes/"+e.selectedSchema+"/"+e.selectedIndex+"/json/samples?count=2",{method:"GET"},t=>{e.setIndexJson(JSON.stringify(t,void 0,2)),d(null),m(!1)},e=>{s(e),d(null),m(!1)}))}};var k=e=>{const[t,a]=Object(l.useState)(null),[s,c]=Object(l.useState)(null),[d,r]=Object(l.useState)(!1),[m,i]=Object(l.useState)("");return n.a.createElement("div",{className:"p-1 h-100"},n.a.createElement("div",{className:"h-100 d-flex flex-column border bg-light rounded"},n.a.createElement("div",{className:"bg-light text-secondary p-1"},"QUERYING ",n.a.createElement(Status,{task:s,error:t,spinning:d})),n.a.createElement("div",{className:"flex-grow-1 p-1"},n.a.createElement("div",{className:"h-100 d-flex"},n.a.createElement("div",{className:"w-50 h-100"},n.a.createElement("div",{className:"h-50"},n.a.createElement("textarea",{className:"form-control h-100",style:{resize:"none"},value:e.queryJson,onChange:t=>e.setQueryJson(t.target.value)})),n.a.createElement("div",{className:"h-50"},"render(",n.a.createElement(AceEditor,{mode:"java",theme:"github",name:"UNIQUE_ID_OF_DIV",editorProps:{$blockScrolling:!0}}),', document.getElementById("example") );',n.a.createElement("p",null,"Example"))),n.a.createElement("div",{className:"w-50 h-100"},n.a.createElement("textarea",{className:"form-control h-100",readOnly:!0,style:{resize:"none"},value:m,onChange:t=>e.setIndexJson(t.target.value)})))),n.a.createElement("form",{className:"form-inline pr-1 pb-1"},n.a.createElement("div",{className:"pl-1"},n.a.createElement(SchemaList,{id:"selectSchema",selectedSchema:e.selectedSchema,setSelectedSchema:e.setSelectedSchema})),n.a.createElement("div",{className:"pl-1"},n.a.createElement(IndexList,{id:"selectIndex",selectedSchema:e.selectedSchema,selectedIndex:e.selectedIndex,setSelectedIndex:e.setSelectedIndex})),n.a.createElement("div",{className:"pt-1 pl-1"},n.a.createElement("button",{className:"btn btn-primary",onClick:()=>function(){if(null==e.selectedSchema||""===e.selectedSchema)return void a("Please select a schema.");if(null==e.selectedIndex||""===e.selectedIndex)return void a("Please select an index.");a(null),c("Parsing..."),r(!0);var t=null;try{t=function(){const t=e.queryJson;if(null===t||""===t)throw"Nothing to index";return JSON.parse(t)}(),e.setQueryJson(JSON.stringify(t,void 0,2))}catch(e){return a(e.message),c(null),void r(!1)}c("Querying..."),fetchJson("/ws/indexes/"+e.selectedSchema+"/"+e.selectedIndex+"/search",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)},e=>{i(JSON.stringify(e,void 0,2)),c("Query successful."),r(!1)},e=>{i(""),a(e),c(null),r(!1)})}()},"QUERY")))))};var F=e=>{switch(e.selectedView){case"Schema":return n.a.createElement(O,{oss:e.oss,selectedSchema:e.selectedSchema,setSelectedSchema:e.setSelectedSchema,selectedIndex:e.selectedIndex,setSelectedIndex:e.setSelectedIndex,selectedField:e.selectedField,setSelectedField:e.setSelectedField});case"Index":return n.a.createElement(j,{oss:e.oss,selectedSchema:e.selectedSchema,setSelectedSchema:e.setSelectedSchema,selectedIndex:e.selectedIndex,setSelectedIndex:e.setSelectedIndex,indexJson:e.indexJson,setIndexJson:e.setIndexJson});case"Query":return n.a.createElement(k,{oss:e.oss,selectedSchema:e.selectedSchema,setSelectedSchema:e.setSelectedSchema,selectedIndex:e.selectedIndex,setSelectedIndex:e.setSelectedIndex,queryJson:e.queryJson,setQueryJson:e.setQueryJson});default:return null}};var C=()=>{const[e]=Object(l.useState)("http://localhost:9090"),[t,a]=Object(l.useState)("Schema"),[s,c]=Object(l.useState)(""),[r,m]=Object(l.useState)(""),[i,o]=Object(l.useState)(""),[u,h]=Object(l.useState)(""),[S,E]=Object(l.useState)(JSON.stringify(JSON.parse('{"query":{"type": "MatchAllDocsQuery"},"returned_fields":["*"]}'),void 0,2));return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"container-fluid"},n.a.createElement(d,{oss:e,selectedView:t,setSelectedView:a})),n.a.createElement("div",{className:"container-fluid h-100 overflow-auto p-0 m-0"},n.a.createElement(F,{oss:e,selectedView:t,selectedSchema:s,setSelectedSchema:function(e){c(e),b("")},selectedIndex:r,setSelectedIndex:b,selectedField:i,setSelectedField:o,indexJson:u,setIndexJson:h,queryJson:S,setQueryJson:E})));function b(e){m(e),o("")}};Object(s.render)(n.a.createElement(n.a.StrictMode,null,n.a.createElement(C,null)),document.getElementById("root"))},4:function(e,t,a){e.exports=a(11)}},[[4,1,2]]]);
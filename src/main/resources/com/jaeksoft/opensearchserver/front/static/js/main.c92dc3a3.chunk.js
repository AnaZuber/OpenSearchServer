(this.webpackJsonpopensearchserver=this.webpackJsonpopensearchserver||[]).push([[0],{339:function(e,t,n){"use strict";n.r(t);var a,r,c=n(0),i=n.n(c),l=n(30),s=n.n(l),o=n(32),j=n(58),d=n(240),b="opensearchserver:state";!function(e){e[e.INDICES=0]="INDICES",e[e.CRAWLS=1]="CRAWLS",e[e.QUERIES=2]="QUERIES",e[e.GRAPHQL=3]="GRAPHQL",e[e.SCHEMA=4]="SCHEMA"}(a||(a={})),function(e){e[e.WEB_CRAWLS=0]="WEB_CRAWLS",e[e.FILE_CRAWLS=1]="FILE_CRAWLS"}(r||(r={}));var u,O={view:a.INDICES,crawlsView:r.WEB_CRAWLS,selectedIndex:void 0,editWebCrawl:void 0,selectedFileCrawl:void 0};!function(e){e[e.SET_VIEW=0]="SET_VIEW",e[e.SET_CRAWLS_VIEW=1]="SET_CRAWLS_VIEW",e[e.EDIT_SCHEMA=2]="EDIT_SCHEMA",e[e.EDIT_WEB_CRAWL=3]="EDIT_WEB_CRAWL",e[e.EDIT_FILE_CRAWL=4]="EDIT_FILE_CRAWL"}(u||(u={}));var x,h,m,f,v,w,C,g,p,S,W,E,L=function(e){return{type:u.SET_VIEW,view:e}},I=function(e){return{type:u.SET_CRAWLS_VIEW,crawlsView:e}},y=function(e,t,n){return{type:u.EDIT_WEB_CRAWL,crawlName:e,indexName:t,settings:n}},A=window.localStorage.getItem(b),_=A?JSON.parse(A):O,R=Object(d.a)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case u.SET_VIEW:e=Object(j.a)(Object(j.a)({},e),{},{view:t.view});break;case u.SET_CRAWLS_VIEW:e=Object(j.a)(Object(j.a)({},e),{},{view:a.CRAWLS,crawlsView:t.crawlsView,editWebCrawl:void 0});break;case u.EDIT_SCHEMA:e=Object(j.a)(Object(j.a)({},e),{},{selectedIndex:t.selectedIndex,view:a.SCHEMA});break;case u.EDIT_WEB_CRAWL:e=Object(j.a)(Object(j.a)({},e),{},{editWebCrawl:{crawlName:t.crawlName,indexName:t.indexName,settings:t.settings},view:a.CRAWLS,crawlsView:r.WEB_CRAWLS});break;case u.EDIT_FILE_CRAWL:e=Object(j.a)(Object(j.a)({},e),{},{selectedFileCrawl:t.selectedCrawl,view:a.CRAWLS,crawlsView:r.FILE_CRAWLS});break;default:return e}return window.localStorage.setItem(b,JSON.stringify(e)),e}),_),k=n(384),$=n(387),D=n(415),T=n(388),N=n.p+"static/media/oss_logo.40a9f4cc.png",z=n(3),F=function(){var e=Object(o.c)((function(e){return e.view})),t=Object(o.b)();return Object(z.jsx)(k.a,{position:"static",color:"transparent",children:Object(z.jsxs)($.a,{children:[Object(z.jsx)("img",{src:N,alt:"OpenSearchServer Logo",style:{maxHeight:"48px",width:"auto"}}),Object(z.jsxs)(D.a,{value:e,onChange:function(e,n){t(L(n))},"aria-label":"Main tab navigation",children:[Object(z.jsx)(T.a,{label:"Indices",value:a.INDICES}),Object(z.jsx)(T.a,{label:"Crawls",value:a.CRAWLS}),Object(z.jsx)(T.a,{label:"Queries",value:a.QUERIES}),Object(z.jsx)(T.a,{label:"GraphQL",value:a.GRAPHQL})]})]})})},B=n(23),V=n.n(B),G=n(65),Q=n(241),U=(n(336),"http://localhost:9090/graphql"),H=function(){return Object(z.jsx)(Q.a,{fetcher:function(){var e=Object(G.a)(V.a.mark((function e(t){var n;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(U,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(t),credentials:"same-origin"});case 2:return n=e.sent,e.abrupt("return",n.json().catch((function(){return n.text()})));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()})},P=n(19),q=n(42),M=n(390),J=n(391),X=n(420),K=n(413),Y=n(395),Z=n(416),ee=n(399),te=n(400),ne=n(401),ae=n(402),re=n(403),ce=n(404),ie=n(405),le=n(406),se=Object(M.a)(x||(x=Object(q.a)(["\n  query IndexList($keywords: String, $start: Int, $rows: Int) {\n    indexList(keywords: $keywords, start: $start, rows: $rows) {\n      name\n      id\n    }\n  }\n"]))),oe=Object(M.a)(h||(h=Object(q.a)(["\n  mutation Createindex($name: String!) {\n    createIndex(name: $name)\n  }\n"]))),je=Object(M.a)(m||(m=Object(q.a)(["\n  mutation Deleteindex($name: String!) {\n    deleteIndex(name: $name)\n  }\n"]))),de=function(){var e=Object(o.b)(),t=Object(c.useState)(""),n=Object(P.a)(t,2),a=n[0],r=n[1],i=Object(c.useState)(0),l=Object(P.a)(i,1)[0],s=Object(c.useState)(1e3),j=Object(P.a)(s,1)[0],d=Object(J.a)(se,{variables:{keywords:a,start:l,rows:j},fetchPolicy:"no-cache"}),b=d.loading,O=d.error,x=d.data,h=d.refetch,m=Object(X.a)(oe,{variables:{name:a},onError:function(e){alert(e),console.error(e)}}),f=Object(P.a)(m,2),v=f[0],w=f[1].loading,C=Object(X.a)(je,{variables:{name:a},onError:function(e){alert(e),console.error(e)}}),g=Object(P.a)(C,2),p=g[0],S=g[1].loading;return O&&(alert(O.message),console.error("GQL INDEX_LIST error: ",O)),Object(z.jsxs)(z.Fragment,{children:[Object(z.jsx)(K.a,{p:2,children:Object(z.jsxs)(Y.a,{container:!0,spacing:1,alignItems:"flex-end",children:[Object(z.jsx)(Y.a,{item:!0,xs:!0,children:Object(z.jsx)(Z.a,{label:"Index name",value:a,size:"small",fullWidth:!0,onChange:function(e){return r(e.target.value)}})}),Object(z.jsxs)(Y.a,{item:!0,xs:"auto",children:[(w||b)&&Object(z.jsx)(ee.a,{size:30}),S&&Object(z.jsx)(ee.a,{size:30,color:"secondary"})]}),Object(z.jsx)(Y.a,{item:!0,xs:"auto",children:Object(z.jsx)(te.a,{disabled:!a||0===a.length||!x||x.indexList.length>0,fullWidth:!0,size:"small",variant:"contained",onClick:function(){return v().then((function(){return h()}))},color:"primary",children:"Create index"})}),Object(z.jsx)(Y.a,{item:!0,xs:"auto",children:Object(z.jsx)(te.a,{disabled:!x||1!==x.indexList.length||x.indexList[0].name!==a,fullWidth:!0,size:"small",variant:"contained",onClick:function(){return p().then((function(){return h()}))},color:"secondary",children:"Delete index"})})]})}),Object(z.jsx)(ne.a,{component:K.a,children:Object(z.jsxs)(ae.a,{size:"small",children:[Object(z.jsx)(re.a,{children:Object(z.jsxs)(ce.a,{children:[Object(z.jsx)(ie.a,{children:"Name"}),Object(z.jsx)(ie.a,{children:"Uuid"})]})}),Object(z.jsx)(le.a,{children:null===x||void 0===x?void 0:x.indexList.map((function(t){return Object(z.jsxs)(ce.a,{onClick:function(){var n;e((n=t.name,{type:u.EDIT_SCHEMA,selectedIndex:n}))},children:[Object(z.jsx)(ie.a,{component:"th",scope:"row",children:t.name}),Object(z.jsx)(ie.a,{children:t.id})]},t.id)}))})]})})]})},be=n(410),ue=n(414),Oe=n(409),xe=function(){var e=Object(o.c)((function(e){return e.selectedIndex})),t=Object(o.b)();return Object(z.jsxs)("div",{children:["Edit Schema ? ",e,Object(z.jsx)(te.a,{onClick:function(){return t(L(a.INDICES))},children:"Back"})]})},he=n(340),me=n(407),fe=Object(M.a)(f||(f=Object(q.a)(["\n  mutation RunWebCrawl($name: String!) {\n    runWebCrawl(name: $name) {\n      name\n    }\n  }\n"]))),ve=Object(M.a)(v||(v=Object(q.a)(["\n  mutation AbortWebCrawl($name: String!, $reason: String) {\n    abortWebCrawl(name: $name, aborting_reason: $reason)\n  }\n"]))),we=Object(M.a)(w||(w=Object(q.a)(["\n  query GetWebCrawl($name: String!) {\n    getWebCrawl(name: $name) {\n      index\n      settings {\n        entryUrl\n        maxDepth\n        filters {\n          pattern\n          status\n        }\n        filterPolicy\n      }\n    }\n  }\n"]))),Ce=function(e){var t=e.item,n=e.completionCallback,a=Object(o.b)(),r=Object(X.a)(fe,{onCompleted:function(e){n()},onError:function(e){alert(e),console.error(e)}}),i=Object(P.a)(r,1)[0],l=Object(X.a)(ve,{onCompleted:function(e){n()},onError:function(e){alert(e),console.error(e)}}),s=Object(P.a)(l,1)[0],j=Object(me.a)(we,{variables:{name:t.name},fetchPolicy:"no-cache",onCompleted:function(e){if(console.log("gqlGetCrawl",e),e.getWebCrawl)a(y(t.name,e.getWebCrawl.index,e.getWebCrawl.settings));else{var n="The crawl does not exist: "+t.name;alert(n),console.error(n)}},onError:function(e){alert(e),console.error(e)}}),d=Object(P.a)(j,1)[0],b=Object(c.useState)(t.status.abortingReason||""),u=Object(P.a)(b,2),O=u[0],x=u[1],h=Object(c.useCallback)(Object(G.a)(V.a.mark((function e(){return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i({variables:{name:t.name}});case 2:case"end":return e.stop()}}),e)}))),[i,t.name]),m=Object(c.useCallback)(Object(G.a)(V.a.mark((function e(){return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s({variables:{name:t.name,reason:O}});case 2:case"end":return e.stop()}}),e)}))),[s,O,t.name]),f=function(e){if(e)return new Date(e).toLocaleString()},v=!t.status.running||t.status.aborting,w=t.status.running,C=t.status.endTime?f(t.status.endTime):t.status.aborting?"Aborting...":t.status.running?"Running...":void 0;return Object(z.jsxs)(ce.a,{children:[Object(z.jsx)(ie.a,{children:Object(z.jsx)(te.a,{size:"small",variant:"outlined",onClick:function(){console.log("editGetCrawlAction"),d()},children:t.name})}),Object(z.jsx)(ie.a,{children:f(t.status.startTime)}),Object(z.jsx)(ie.a,{children:C}),Object(z.jsx)(ie.a,{children:t.status.crawled}),Object(z.jsx)(ie.a,{children:t.status.rejected}),Object(z.jsx)(ie.a,{children:t.status.error}),Object(z.jsx)(ie.a,{children:Object(z.jsxs)(K.a,{display:"flex",alignItems:"flex-end",children:[Object(z.jsx)(K.a,{mr:1,flexGrow:1,children:Object(z.jsx)(Z.a,{label:"Aborting reason",value:O,disabled:v,onChange:function(e){return x(e.target.value)},size:"small",fullWidth:!0})}),Object(z.jsx)(K.a,{mr:1,children:Object(z.jsx)(te.a,{disabled:v,size:"small",variant:"contained",onClick:m,color:"secondary",children:"Abort"})}),Object(z.jsx)(te.a,{disabled:w,size:"small",variant:"contained",onClick:h,color:"primary",children:"Run"})]})})]},t.name)},ge=Object(M.a)(C||(C=Object(q.a)(["\n  query WebCrawlList($keywords: String, $start: Int, $rows: Int) {\n    webCrawlList(keywords: $keywords, start: $start, rows: $rows) {\n      name\n      status {\n        running\n        aborting\n        abortingReason\n        crawled\n        rejected\n        redirect\n        error\n        lastError\n        currentCrawl\n        currentDepth\n        startTime\n        endTime\n      }\n    }\n  }\n"]))),pe=Object(M.a)(g||(g=Object(q.a)(["\n  mutation DeleteWebCrawl($name: String!) {\n    deleteWebCrawl(name: $name)\n  }\n"]))),Se=function(){var e=Object(o.b)(),t=Object(o.c)((function(e){return e.selectedIndex})),n=Object(c.useState)(""),a=Object(P.a)(n,2),r=a[0],i=a[1],l=Object(c.useState)(0),s=Object(P.a)(l,1)[0],j=Object(c.useState)(1e3),d=Object(P.a)(j,1)[0],b=Object(J.a)(ge,{variables:{keywords:r,start:s,rows:d},fetchPolicy:"no-cache",pollInterval:1e4}),u=b.loading,O=b.error,x=b.data,h=b.refetch,m=Object(X.a)(pe,{variables:{name:r},onError:function(e){alert(e),console.error(e)}}),f=Object(P.a)(m,2),v=f[0],w=f[1].loading;O&&(alert(O.message),console.error("GQL WEB_CRAWL_LIST error: ",O));var C=Object(c.useCallback)((function(){e(y(r,t,void 0))}),[e,t,r]);return Object(z.jsx)(ne.a,{component:he.a,children:Object(z.jsxs)(ae.a,{size:"small",children:[Object(z.jsxs)(re.a,{children:[Object(z.jsx)(ce.a,{children:Object(z.jsx)(ie.a,{colSpan:7,children:Object(z.jsxs)(Y.a,{container:!0,spacing:1,alignItems:"flex-end",children:[Object(z.jsx)(Y.a,{item:!0,xs:!0,children:Object(z.jsx)(Z.a,{label:"Web crawl name",value:r,size:"small",fullWidth:!0,onChange:function(e){return i(e.target.value)}})}),Object(z.jsxs)(Y.a,{item:!0,xs:"auto",children:[u&&Object(z.jsx)(ee.a,{size:30}),w&&Object(z.jsx)(ee.a,{size:30,color:"secondary"})]}),Object(z.jsx)(Y.a,{item:!0,xs:"auto",children:Object(z.jsx)(te.a,{disabled:!r||0===r.length||!x||x.webCrawlList.length>0,fullWidth:!0,size:"small",variant:"contained",onClick:C,color:"primary",children:"Create crawl"})}),Object(z.jsx)(Y.a,{item:!0,xs:"auto",children:Object(z.jsx)(te.a,{disabled:!x||1!==x.webCrawlList.length||x.webCrawlList[0].name!==r,fullWidth:!0,size:"small",variant:"contained",onClick:function(){return v().then((function(){return h()}))},color:"secondary",children:"Delete crawl"})})]})})}),x&&x.webCrawlList&&x.webCrawlList.length>0&&Object(z.jsxs)(ce.a,{children:[Object(z.jsx)(ie.a,{children:"Name"}),Object(z.jsx)(ie.a,{children:"Started"}),Object(z.jsx)(ie.a,{children:"Ended"}),Object(z.jsx)(ie.a,{children:"Crawled"}),Object(z.jsx)(ie.a,{children:"Rejected"}),Object(z.jsx)(ie.a,{children:"Error"}),Object(z.jsx)(ie.a,{})]})]}),Object(z.jsx)(le.a,{children:null===x||void 0===x?void 0:x.webCrawlList.map((function(e){return Object(z.jsx)(Ce,{item:e,completionCallback:function(){return h()}},e.name)}))})]})})},We=Object(M.a)(p||(p=Object(q.a)(["\n  query FileCrawlList($keywords: String, $start: Int, $rows: Int) {\n    fileCrawlList(keywords: $keywords, start: $start, rows: $rows) {\n      name\n      status {\n        running\n        aborting\n        abortingReason\n        crawled\n        rejected\n        redirect\n        error\n        lastError\n        currentCrawl\n        currentDepth\n        startTime\n        endTime\n      }\n    }\n  }\n"]))),Ee=Object(M.a)(S||(S=Object(q.a)(["\n  mutation StopFileCrawl($name: String!, $reason: String) {\n    abortFileCrawl(name: $name, aborting_reason: $reason)\n  }\n"]))),Le=Object(M.a)(W||(W=Object(q.a)(["\n  mutation DeleteFileCrawl($name: String!) {\n    deleteFileCrawl(name: $name)\n  }\n"]))),Ie=function(e){var t=e.item,n=e.stopCallback,a=Object(X.a)(Ee,{onCompleted:function(e){n()},onError:function(e){alert(e),console.error(e)}}),r=Object(P.a)(a,2),i=r[0],l=(r[1].loading,Object(c.useState)(t.status.abortingReason)),s=Object(P.a)(l,2),o=s[0],j=s[1],d=Object(c.useCallback)(Object(G.a)(V.a.mark((function e(){return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i({variables:{name:t.name,reason:o}});case 2:case"end":return e.stop()}}),e)}))),[o]),b=function(e){if(e)return new Date(e).toLocaleString()},u=!!t.status.endTime||t.status.aborting,O=t.status.endTime?b(t.status.endTime):t.status.aborting?"Aborting...":void 0;return Object(z.jsxs)(ce.a,{children:[Object(z.jsx)(ie.a,{children:t.name}),Object(z.jsx)(ie.a,{children:b(t.status.startTime)}),Object(z.jsx)(ie.a,{children:O}),Object(z.jsx)(ie.a,{children:t.status.crawled}),Object(z.jsx)(ie.a,{children:t.status.rejected}),Object(z.jsx)(ie.a,{children:t.status.error}),Object(z.jsx)(ie.a,{children:Object(z.jsxs)(K.a,{display:"flex",alignItems:"flex-end",children:[Object(z.jsx)(K.a,{mr:1,flexGrow:1,children:Object(z.jsx)(Z.a,{label:"Aborting reason",value:o,disabled:u,onChange:function(e){return j(e.target.value)},size:"small",fullWidth:!0})}),Object(z.jsx)(te.a,{disabled:u,size:"small",variant:"contained",onClick:d,color:"secondary",children:"Stop"})]})})]},t.name)},ye=function(){var e=Object(o.b)(),t=Object(c.useState)(""),n=Object(P.a)(t,2),a=n[0],r=n[1],i=Object(c.useState)(0),l=Object(P.a)(i,2),s=l[0],j=(l[1],Object(c.useState)(1e3)),d=Object(P.a)(j,2),b=d[0],O=(d[1],Object(J.a)(We,{variables:{keywords:a,start:s,rows:b},fetchPolicy:"no-cache",pollInterval:1e4})),x=O.loading,h=O.error,m=O.data,f=O.refetch,v=Object(X.a)(Le,{variables:{name:a},onError:function(e){alert(e),console.error(e)}}),w=Object(P.a)(v,2),C=w[0],g=w[1],p=g.loading;g.error;h&&(alert(h.message),console.error("GQL FILE_CRAWL_LIST error: ",h));var S=Object(c.useCallback)((function(){var t;e((t=a,{type:u.EDIT_FILE_CRAWL,selectedCrawl:t}))}),[a]);return Object(z.jsx)(ne.a,{component:he.a,children:Object(z.jsxs)(ae.a,{size:"small",children:[Object(z.jsxs)(re.a,{children:[Object(z.jsx)(ce.a,{children:Object(z.jsx)(ie.a,{colSpan:7,children:Object(z.jsxs)(Y.a,{container:!0,spacing:1,alignItems:"flex-end",children:[Object(z.jsx)(Y.a,{item:!0,xs:!0,children:Object(z.jsx)(Z.a,{label:"File crawl name",value:a,size:"small",fullWidth:!0,onChange:function(e){return r(e.target.value)}})}),Object(z.jsxs)(Y.a,{item:!0,xs:"auto",children:[x&&Object(z.jsx)(ee.a,{size:30}),p&&Object(z.jsx)(ee.a,{size:30,color:"secondary"})]}),Object(z.jsx)(Y.a,{item:!0,xs:"auto",children:Object(z.jsx)(te.a,{disabled:!a||0===a.length||!m||m.fileCrawlList.length>0,fullWidth:!0,size:"small",variant:"contained",onClick:S,color:"primary",children:"Create crawl"})}),Object(z.jsx)(Y.a,{item:!0,xs:"auto",children:Object(z.jsx)(te.a,{disabled:!m||1!==m.fileCrawlList.length||m.fileCrawlList[0].name!==a,fullWidth:!0,size:"small",variant:"contained",onClick:function(){return C().then((function(){return f()}))},color:"secondary",children:"Delete crawl"})})]})})}),m&&m.fileCrawlList&&m.fileCrawlList.length>0&&Object(z.jsxs)(ce.a,{children:[Object(z.jsx)(ie.a,{children:"Name"}),Object(z.jsx)(ie.a,{children:"Started"}),Object(z.jsx)(ie.a,{children:"Ended"}),Object(z.jsx)(ie.a,{children:"Crawled"}),Object(z.jsx)(ie.a,{children:"Rejected"}),Object(z.jsx)(ie.a,{children:"Error"}),Object(z.jsx)(ie.a,{})]})]}),Object(z.jsx)(le.a,{children:null===m||void 0===m?void 0:m.fileCrawlList.map((function(e){return Object(z.jsx)(Ie,{item:e,stopCallback:function(){return f()}})}))})]})})},Ae=n(178),_e=n(408);!function(e){e.accept="accept",e.reject="reject"}(E||(E={}));var Re,ke,$e=n(398),De=n(418),Te=n(411),Ne=n(419),ze=function(e){var t=e.disabled,n=e.status,a=e.setStatus,r=e.isDefault?"Default policy":"Policy";return Object(z.jsxs)($e.a,{fullWidth:!0,children:[Object(z.jsx)(De.a,{id:"policy-label",children:r}),Object(z.jsxs)(Te.a,{labelId:"policy-label",id:"policy",value:n,disabled:t,onChange:function(e){return a(e.target.value)},children:[Object(z.jsx)(Ne.a,{value:E.accept,children:"Accept"}),Object(z.jsx)(Ne.a,{value:E.reject,children:"Reject"})]})]})},Fe=function(e){var t,n,a=Object(c.useState)((null===(t=e.filter)||void 0===t?void 0:t.pattern)||""),r=Object(P.a)(a,2),i=r[0],l=r[1],s=Object(c.useState)((null===(n=e.filter)||void 0===n?void 0:n.status)||E.accept),o=Object(P.a)(s,2),j=o[0],d=o[1],b=Object(c.useState)(!1),u=Object(P.a)(b,2),O=u[0],x=u[1];return Object(c.useEffect)((function(){var t,n,a=i!==(null===(t=e.filter)||void 0===t?void 0:t.pattern)||j!==(null===(n=e.filter)||void 0===n?void 0:n.status);x(a)}),[e.filter,i,j]),Object(z.jsxs)(K.a,{display:"flex",mb:2,children:[Object(z.jsx)(K.a,{flexGrow:1,mr:2,children:Object(z.jsx)(Z.a,{id:"filter",label:"Wildcard filter",fullWidth:!0,value:i,disabled:e.disabled,onChange:function(e){return l(e.target.value)},placeholder:"https://www.opensearchserver.com/*"})}),Object(z.jsx)(K.a,{mr:2,children:Object(z.jsx)(ze,{disabled:e.disabled,status:j,setStatus:d,isDefault:!1})}),Object(z.jsxs)(K.a,{mr:2,display:"flex",alignItems:"flex-end",children:[!e.filter&&Object(z.jsx)(te.a,{size:"small",variant:"contained",color:"primary",disabled:!i.length||e.disabled,onClick:function(){e.onAdd&&e.onAdd({pattern:i,status:j})},children:"Add"}),e.filter&&Object(z.jsxs)(z.Fragment,{children:[Object(z.jsx)(K.a,{mr:1,children:Object(z.jsx)(te.a,{size:"small",variant:"contained",color:"primary",disabled:!O||e.disabled,onClick:function(){console.log("onSave props",e),e.onSave&&e.index&&e.onSave({pattern:i,status:j},e.index)},children:"Save"})}),Object(z.jsx)(te.a,{size:"small",variant:"contained",color:"secondary",disabled:e.disabled,onClick:function(){e.onDelete&&e.index&&e.onDelete(e.index)},children:"Delete"})]})]})]})},Be=Object(M.a)(Re||(Re=Object(q.a)(["\n  mutation UpsertWebCrawl($name: String!, $settings: WebCrawlSettingsInput!, $index: String!) {\n    upsertWebCrawl(name: $name, settings: $settings, index: $index) {name}\n  }\n"]))),Ve=function(e){var t,n=[],a=Object(Ae.a)(e);try{for(a.s();!(t=a.n()).done;){var r=t.value;n.push(r.filter)}}catch(c){a.e(c)}finally{a.f()}return n},Ge=function(){var e,t,n,a,i,l=Object(o.b)(),s=Object(o.c)((function(e){return e.editWebCrawl})),j=Object(c.useState)((null===s||void 0===s?void 0:s.indexName)||""),d=Object(P.a)(j,2),b=d[0],u=d[1],O=Object(c.useState)((null===s||void 0===s||null===(e=s.settings)||void 0===e?void 0:e.entryUrl)||""),x=Object(P.a)(O,2),h=x[0],m=x[1],f=Object(c.useState)(null===s||void 0===s||null===(t=s.settings)||void 0===t?void 0:t.maxDepth),v=Object(P.a)(f,2),w=v[0],C=v[1],g=Object(c.useState)((null===s||void 0===s?void 0:s.crawlName)||""),p=Object(P.a)(g,2),S=p[0],W=p[1],L=Object(c.useState)((null===s||void 0===s||null===(n=s.settings)||void 0===n?void 0:n.filterPolicy)||E.reject),y=Object(P.a)(L,2),A=y[0],_=y[1],R=Object(c.useState)((null===s||void 0===s||null===(a=s.settings)||void 0===a?void 0:a.filters)||[]),k=Object(P.a)(R,2),$=k[0],D=k[1],T=Object(c.useState)(function(e){var t={sequenceNumber:1,list:[]};if(e){var n,a=Object(Ae.a)(e);try{for(a.s();!(n=a.n()).done;){var r=n.value;delete r.__typename;var c={index:t.sequenceNumber++,filter:r};t.list.push(c)}}catch(i){a.e(i)}finally{a.f()}}return t}(null===s||void 0===s||null===(i=s.settings)||void 0===i?void 0:i.filters)),N=Object(P.a)(T,1)[0];console.log("crawlFilterList",$);var F=Object(X.a)(Be,{variables:{name:S,settings:{entryUrl:h,maxDepth:w,filters:$,filterPolicy:A},index:b},onCompleted:function(e){l(I(r.WEB_CRAWLS)),console.trace(e)},onError:function(e){alert(e),console.error(e)}}),B=Object(P.a)(F,2),Q=B[0],U=B[1].loading,H=function(){var e=Object(G.a)(V.a.mark((function e(){return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Q();case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),q=function(e,t){console.log("onSave",t);var n=N.list.find((function(e){return e.index===t}));n&&(n.filter=e),D(Ve(N.list))},M=function(e){var t=N.list.filter((function(t){return t.index!==e}));N.list=t,D(Ve(N.list))},J=void 0!==(null===s||void 0===s?void 0:s.settings)?"Edit Crawl":"New Crawl";return Object(z.jsx)(K.a,{p:1,children:Object(z.jsx)(he.a,{children:Object(z.jsxs)(K.a,{p:2,children:[Object(z.jsxs)(Y.a,{container:!0,justify:"space-between",spacing:10,children:[Object(z.jsx)(Y.a,{item:!0,children:Object(z.jsx)(_e.a,{align:"right",variant:"h5",children:J})}),Object(z.jsx)(Y.a,{item:!0,children:Object(z.jsxs)(Y.a,{container:!0,spacing:2,children:[Object(z.jsx)(Y.a,{item:!0,children:Object(z.jsx)(te.a,{variant:"contained",color:"secondary",onClick:function(){l(I(r.WEB_CRAWLS))},children:"Cancel"})}),Object(z.jsx)(Y.a,{item:!0,children:Object(z.jsx)(te.a,{variant:"contained",color:"primary",onClick:H,children:"Upsert"})})]})})]}),Object(z.jsx)("form",{noValidate:!0,autoComplete:"off",children:Object(z.jsxs)(Y.a,{container:!0,spacing:2,children:[Object(z.jsx)(Y.a,{item:!0,xs:6,children:Object(z.jsx)(Z.a,{fullWidth:!0,required:!0,id:"CrawlName",label:"Crawl Name",value:S,disabled:!0,onChange:function(e){return W(e.target.value)},placeholder:(null===s||void 0===s?void 0:s.crawlName)||"Crawl name"})}),Object(z.jsx)(Y.a,{item:!0,xs:6,children:Object(z.jsx)(Z.a,{fullWidth:!0,required:!0,id:"IndexName",label:"Index Name",value:b,disabled:U,onChange:function(e){return u(e.target.value)},placeholder:(null===s||void 0===s?void 0:s.indexName)||"Index name"})}),Object(z.jsx)(Y.a,{item:!0,xs:12,children:Object(z.jsx)(Z.a,{fullWidth:!0,required:!0,id:"entryUrl",label:"Entry URL",value:h,disabled:U,onChange:function(e){return m(e.target.value)},placeholder:"https://www.opensearchserver.com"})}),Object(z.jsx)(Y.a,{item:!0,xs:6,children:Object(z.jsx)(Z.a,{fullWidth:!0,id:"max_depth",label:"Max depth",type:"number",disabled:U,value:w,onChange:function(e){return C(+e.target.value)},placeholder:"1"})}),Object(z.jsx)(Y.a,{item:!0,xs:6,children:Object(z.jsx)(Z.a,{fullWidth:!0,id:"max_number_url",label:"Max number of URL",type:"number",disabled:U,placeholder:"1000"})}),Object(z.jsxs)(Y.a,{item:!0,xs:10,children:[Object(z.jsx)(Fe,{onAdd:function(e){var t={index:N.sequenceNumber++,filter:e};N.list.push(t),console.log("crawlFilterListWithIndex.list",N.list),D(Ve(N.list))},disabled:U}),N.list.map((function(e){return Object(z.jsx)(Fe,{disabled:U,filter:e.filter,index:e.index,onSave:q,onDelete:M},e.index)}))]}),Object(z.jsx)(Y.a,{item:!0,xs:2,children:Object(z.jsx)(ze,{disabled:!1,status:A,setStatus:_,isDefault:!0})})]})})]})})})},Qe=(n(70),Object(M.a)(ke||(ke=Object(q.a)(["\n  mutation RunFileCrawl($name: String!) {\n    runFileCrawl(name: $name) {name}\n  }\n"]))),function(){var e=Object(o.b)(),t=Object(o.c)((function(e){return e.crawlsView})),n=Object(o.c)((function(e){return e.editWebCrawl}));return console.trace("crawlsview",t),Object(z.jsxs)("div",{children:[Object(z.jsx)(k.a,{position:"static",children:Object(z.jsxs)(D.a,{value:t,onChange:function(t,n){e(I(n))},"aria-label":"Crawls tabs",children:[Object(z.jsx)(T.a,{label:"Web Crawls",value:r.WEB_CRAWLS}),Object(z.jsx)(T.a,{label:"File Crawls",value:r.FILE_CRAWLS})]})}),t===r.WEB_CRAWLS&&!n&&Object(z.jsx)(Se,{}),t===r.FILE_CRAWLS&&Object(z.jsx)(ye,{}),t===r.WEB_CRAWLS&&n&&Object(z.jsx)(Ge,{}),t===r.FILE_CRAWLS&&!1]})}),Ue=function(){switch(Object(o.c)((function(e){return e.view}))){case a.INDICES:return Object(z.jsx)(de,{});case a.CRAWLS:return Object(z.jsx)(Qe,{});case a.QUERIES:return Object(z.jsx)("div",{children:"QUERIES"});case a.GRAPHQL:return Object(z.jsx)(H,{});case a.SCHEMA:return Object(z.jsx)(xe,{});default:return null}},He=new be.a({uri:U,cache:new ue.a});s.a.render(Object(z.jsx)(i.a.StrictMode,{children:Object(z.jsx)(o.a,{store:R,children:Object(z.jsx)(Oe.a,{client:He,children:Object(z.jsxs)(K.a,{m:0,display:"flex",flexDirection:"column",height:"100vh",children:[Object(z.jsx)(K.a,{m:0,marginBottom:1,children:Object(z.jsx)(F,{})}),Object(z.jsx)(K.a,{m:0,p:0,height:"100vh",children:Object(z.jsx)(Ue,{})})]})})})}),document.getElementById("root"))}},[[339,1,2]]]);
//# sourceMappingURL=main.c92dc3a3.chunk.js.map
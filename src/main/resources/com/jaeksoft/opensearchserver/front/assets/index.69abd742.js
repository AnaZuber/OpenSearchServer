(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{14:function(e,t,a){e.exports=a(30)},20:function(e,t,a){},30:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),s=a(12);a(19),a(20);const c=e=>e.enabled?e.selectedView===e.view?l.a.createElement("a",{className:"nav nav-link active",href:"#"},e.view," ",l.a.createElement("span",{className:"sr-only"},"(current)")):l.a.createElement("a",{className:"nav-item nav-link",onClick:()=>e.setSelectedView(e.view),href:"#"},e.view):l.a.createElement("a",{className:"nav-item nav-link disabled",href:"#"},e.view),r=e=>(Object(n.useEffect)(()=>{},[e.selectedIndex]),e.selectedIndex?l.a.createElement("span",{className:"navbar-text"},e.selectedIndex):null);var d=e=>(Object(n.useEffect)(()=>{},[e.selectedIndex]),l.a.createElement("nav",{className:"navbar navbar-light navbar-expand bg-light"},l.a.createElement("span",{className:"navbar-brand text-secondary"},l.a.createElement("small",null,"OpenSearchServer 2.0")),l.a.createElement("div",{className:"collapse navbar-collapse"},l.a.createElement("div",{className:"navbar-nav mr-auto"},l.a.createElement(c,{selectedView:e.selectedView,setSelectedView:e.setSelectedView,enabled:!0,view:"Indices"}),l.a.createElement(c,{selectedView:e.selectedView,setSelectedView:e.setSelectedView,enabled:e.selectedIndex,view:"Fields"}),l.a.createElement(c,{selectedView:e.selectedView,setSelectedView:e.setSelectedView,enabled:e.selectedIndex,view:"Ingest"}),l.a.createElement(c,{selectedView:e.selectedView,setSelectedView:e.setSelectedView,enabled:e.selectedIndex,view:"Query"})),l.a.createElement(r,{selectedIndex:e.selectedIndex}))));function i(e){return e.spinning?l.a.createElement("div",{className:"spinner-border spinner-border-sm",role:"status"},l.a.createElement("span",{className:"sr-only"},"Loading...")):""}var o=function(e){return Object(n.useEffect)(()=>{},[e.error,e.task,e.spinning]),e.error&&e.task?l.a.createElement(l.a.Fragment,null,l.a.createElement(i,{spinning:e.spinning}),l.a.createElement("div",{className:"text-danger float-right"},l.a.createElement("small",null,e.task,": ",e.error))):e.error?l.a.createElement(l.a.Fragment,null,l.a.createElement(i,{spinning:e.spinning}),l.a.createElement("div",{className:"text-danger float-right"},l.a.createElement("small",null,e.error))):e.task?l.a.createElement(l.a.Fragment,null,l.a.createElement(i,{spinning:e.spinning}),l.a.createElement("div",{className:"text-success float-right"},l.a.createElement("small",null,e.task))):l.a.createElement(l.a.Fragment,null,l.a.createElement(i,{spinning:e.spinning})," ")},m=a(4),u=a.n(m);a(28),a(29);var E=e=>null==e.setValue?l.a.createElement(u.a,{mode:"json",theme:"github",editorProps:{$blockScrolling:!1},value:e.value,readOnly:!0,height:"100%",width:"100%",setOptions:{useWorker:!1}}):l.a.createElement(u.a,{mode:"json",theme:"github",editorProps:{$blockScrolling:!1},value:e.value,height:"100%",width:"100%",setOptions:{useWorker:!1},onChange:t=>e.setValue(t)});function b(e,t,a,n){n||(n=console.log),fetch(e,t).then(e=>Promise.all([e.ok,e.json()])).then(([e,t])=>e?a(t):n(t.message)).catch(e=>n(e.message))}var x=a(31);const p=e=>0==e.pos?l.a.createElement("pre",{className:"small"},l.a.createElement("code",null,e.queryTypeDetail||e.queryType)):l.a.createElement("small",null,e.queryType);var f=e=>{const[t,a]=Object(n.useState)([]),[s,c]=Object(n.useState)(""),[r,d]=Object(n.useState)(""),[i,o]=Object(n.useState)("");if(Object(n.useEffect)(()=>{},[e.selectedIndex,e.queryJson]),!e.selectedIndex)return null;try{const t=Object.keys(JSON.parse(e.queryJson).query)[0]||"";t!==s&&(c(t),u(t))}catch(e){}const m=Object.keys(t).map((e,a)=>l.a.createElement("li",{className:"list-group-item pl-1 pr-1 pt-1 pb-0",key:a,onClick:t=>u(e)},l.a.createElement("a",{href:t[e],target:"_blank",className:"float-right"},l.a.createElement(x.a,null)),l.a.createElement(p,{pos:a,queryType:e,queryTypeDetail:i})));return l.a.createElement(l.a.Fragment,null,l.a.createElement("input",{className:"form-control",value:r,onChange:e=>u(e.target.value)}),l.a.createElement("div",{className:"list-group"},m));function u(t){e.selectedIndex&&(d(t),b(e.oss+"/ws/indexes/"+e.selectedIndex+"/search/queries/types?lookup="+t,null,t=>{!function(t){a(t);const n=Object.keys(t)[0]||"";n&&b(e.oss+"/ws/indexes/"+e.selectedIndex+"/search/queries/types/"+n,null,e=>{o(JSON.stringify(e,void 0,2))})}(t)}))}};var S=e=>{const[t,a]=Object(n.useState)(null),[s,c]=Object(n.useState)(null),[r,d]=Object(n.useState)(!1),[i,m]=Object(n.useState)("");return Object(n.useEffect)(()=>{},[e.selectedIndex]),l.a.createElement("div",{className:"query-view"},l.a.createElement("div",{className:"bg-light text-secondary p-1"},"QUERYING ",l.a.createElement(o,{task:s,error:t,spinning:r})),l.a.createElement("div",{className:"central border bg-light"},l.a.createElement("div",{className:"query-builder border bg-light"},l.a.createElement("div",{className:"query-json"},l.a.createElement(E,{value:e.queryJson,setValue:e.setQueryJson})),l.a.createElement("div",{className:"query-help"},l.a.createElement(f,{oss:e.oss,selectedIndex:e.selectedIndex,queryJson:e.queryJson}))),l.a.createElement("div",{className:"query-result border bg-light"},l.a.createElement(E,{value:i}))),l.a.createElement("form",{className:"form-inline pr-1 pb-1"},l.a.createElement("div",{className:"pt-1 pl-1"},l.a.createElement("button",{className:"btn btn-primary",onClick:()=>function(){if(null==e.selectedIndex||""===e.selectedIndex)return void a("Please select an index.");a(null),c("Parsing..."),d(!0);var t=null;try{t=function(){const t=e.queryJson;if(null===t||""===t)throw"Nothing to index";return JSON.parse(t)}(),e.setQueryJson(JSON.stringify(t,void 0,2))}catch(e){return a(e.message),c(null),void d(!1)}c("Querying..."),b(e.oss+"/ws/indexes/"+e.selectedIndex+"/search",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)},e=>{m(JSON.stringify(e,void 0,2)),c("Query successful."),d(!1)},e=>{m(""),a(e),c(null),d(!1)})}()},"QUERY"))))};const h=e=>l.a.createElement("button",{className:"btn btn-danger shadow-none btn-block",type:"button",onClick:()=>e.doDelete(e.name)},"Delete"),v=e=>e.name?l.a.createElement("button",{className:"btn btn-primary shadow-none btn-block",type:"button",onClick:()=>e.doCreate(e.name)},"Create"):l.a.createElement("button",{className:"btn btn-primary shadow-none btn-block",type:"button",disabled:!0},"Create");var y=e=>e.name&&e.name===e.selectedName?l.a.createElement(h,{name:e.name,doDelete:e.doDelete}):l.a.createElement(v,{name:e.name,doCreate:e.doCreate});var g=e=>l.a.createElement("form",null,l.a.createElement("div",{className:"form-row p-1"},l.a.createElement("div",{className:"form-group col-md-6"},l.a.createElement("input",{type:"text",className:"form-control shadow-none",placeholder:"Index name",title:"The index name","aria-label":"index name","aria-describedby":"Enter the index name",value:e.indexName,onChange:t=>e.setIndexName(t.target.value)})),l.a.createElement("div",{className:"form-group col-md-4"},l.a.createElement("input",{type:"text",className:"form-control shadow-none",placeholder:"Primary key",title:"The primary key","aria-label":"primary key","aria-describedby":"Enter the primary key",value:e.primaryKey,onChange:t=>e.setPrimaryKey(t.target.value)})),l.a.createElement("div",{className:"form-group col-md-2"},l.a.createElement(y,{name:e.indexName,selectedName:e.selectedIndex,doDelete:t=>e.doDelete(t),doCreate:t=>e.doCreate(t)}))));const N=e=>{return e.selectedIndex===e.index?l.a.createElement("tr",{className:"table-active",onClick:()=>e.setSelectedIndex(e.index)},l.a.createElement("td",{className:"p-1 m-1"},e.index),l.a.createElement("td",{className:"p-1 m-1"},null==(t=e.selectedIndexStatus)||null==t.settings?null:t.settings.primary_key),l.a.createElement("td",{className:"p-1 m-1"},function(e){return null==e?null:e.num_docs}(e.selectedIndexStatus))):l.a.createElement("tr",{onClick:()=>e.setSelectedIndex(e.index)},l.a.createElement("td",{className:"p-1 m-1"},e.index),l.a.createElement("td",{colSpan:"2",title:"Select the line to see the primary key and the number of docs",className:"p-1 m-1"}));var t};var I=e=>{if(!e.indices)return null;const t=(Array.isArray(e.indices)?e.indices:Object.keys(e.indices)).map((t,a)=>l.a.createElement(N,{key:a,index:t,selectedIndex:e.selectedIndex,setSelectedIndex:e.setSelectedIndex,selectedIndexStatus:e.selectedIndexStatus,setSelectedIndexStatus:e.setSelectedIndexStatus}));return l.a.createElement("table",{className:"table table-hover table-sm table-striped table-light"},l.a.createElement("thead",{className:"thead-light"},l.a.createElement("tr",null,l.a.createElement("th",null,"Index name"),l.a.createElement("th",{title:"Select an index to see the primary key"},"Primary key"),l.a.createElement("th",{title:"Select an index to see the number of documents"},"Num docs"))),l.a.createElement("tbody",null,t))};var k=function(e){const[t,a]=Object(n.useState)(null),[s,c]=Object(n.useState)(null),[r,d]=Object(n.useState)(!1),[i,m]=Object(n.useState)([]),[u,E]=Object(n.useState)(""),[x,p]=Object(n.useState)("id");return Object(n.useEffect)(()=>{f()},[]),l.a.createElement("div",{className:"border bg-light rounded"},l.a.createElement("div",{className:"bg-light text-secondary p-1"},"INDICES ",l.a.createElement(o,{task:t,error:s,spinning:r})),l.a.createElement(g,{indexName:u,setIndexName:e=>E(e),selectedIndex:e.selectedIndex,setPrimaryKey:e=>p(e),primaryKey:x,doCreate:t=>function(t){S("Creating index "+t),b(e.oss+"/ws/indexes/"+u,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({primary_key:x,record_field:"$record$"})},a=>{h("Index created"),E(""),e.setSelectedIndex(t),f()},e=>h(null,e))}(t),doDelete:t=>function(t){S("Deleting index "+t),b(e.oss+"/ws/indexes/"+t,{method:"DELETE"},t=>{e.setSelectedIndex(null),h("Index deleted"),f()},e=>h(null,e))}(t)}),l.a.createElement(I,{indices:i,selectedIndex:e.selectedIndex,setSelectedIndex:function(t){e.setSelectedIndexStatus({}),function(t){if(!t)return null;S(),b(e.oss+"/ws/indexes/"+t,null,t=>{e.setSelectedIndexStatus(t),h()},e=>h(null,e))}(t),e.setSelectedIndex(t)},selectedIndexStatus:e.selectedIndexStatus,setSelectedIndexStatus:e.setSelectedIndexStatus}));function f(){S(),b(e.oss+"/ws/indexes",null,e=>{h(),m(e)},e=>h(null,e))}function S(e){d(!0),e&&(a(e),c(null))}function h(e,t){d(!1),e&&a(e),t?c(t):e&&c(null)}};var w=e=>l.a.createElement("div",{className:"index-view"},l.a.createElement(k,{oss:e.oss,selectedIndex:e.selectedIndex,setSelectedIndex:e.setSelectedIndex,selectedIndexStatus:e.selectedIndexStatus,setSelectedIndexStatus:e.setSelectedIndexStatus}));var O=e=>{const[t,a]=Object(n.useState)(!0),[s,c]=Object(n.useState)(!1),[r,d]=Object(n.useState)(!1),[i,o]=Object(n.useState)(!1),[m,u]=Object(n.useState)("text"),[E,b]=Object(n.useState)("");function x(e){const t="attr"+e.attributeKey;return l.a.createElement("div",{key:t,className:"form-check form-check-inline"},l.a.createElement("input",{className:"form-check-input",type:"checkbox",id:t,value:e.attributeKey,checked:e.checked,onChange:t=>e.setAttribute(t.target.checked)}),l.a.createElement("label",{className:"form-check-label",htmlFor:t},e.attributeLabel))}const p=["text","integer","long","double","float"].map(e=>l.a.createElement("option",{key:e,value:e},e));function f(e){return l.a.createElement("select",{className:"custom-select shadow-none rounded-0",value:e.value,onChange:t=>e.setValue(t.target.value)},p)}const S=["","lowercase","ascii","arabic","bulgarian","cjk","czech","danish","dutch","english","french","finnish","german","greek","hindi","hungarian","irish","italian","lithuanian","latvian","norwegian","polish","portuguese","romanian","russian","spanish","swedish","turkish"].map(e=>l.a.createElement("option",{key:e,value:e},e));function h(e){return l.a.createElement("select",{className:"custom-select shadow-none rounded-0",value:e.value,onChange:t=>e.setValue(t.target.value)},S)}return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"input-group p-1"},l.a.createElement("input",{type:"text",className:"form-control shadow-none rounded-0","aria-label":"edit field name","aria-describedby":"edit field name",value:e.editFieldName,onChange:t=>e.setEditFieldName(t.target.value)}),l.a.createElement("div",{className:"input-group-append"},l.a.createElement(f,{value:m,setValue:e=>u(e)}),l.a.createElement(h,{value:E,setValue:e=>b(e)}),l.a.createElement(y,{name:e.editFieldName,selectedName:e.selectedField,doDelete:t=>e.doDeleteField(t),doCreate:a=>{return n=a,void e.doCreateField(n,{type:m.toUpperCase(),stored:s,index:t,facet:r,sort:i,analyzer:""===E?null:E});var n}}))),l.a.createElement("div",{className:"p-1"},l.a.createElement(x,{checked:t,attributeKey:"index",attributeLabel:"indexed",setAttribute:e=>a(e)}),l.a.createElement(x,{checked:s,attributeKey:"stored",attributeLabel:"stored",setAttribute:e=>c(e)}),l.a.createElement(x,{checked:r,attributeKey:"facet",attributeLabel:"faceted",setAttribute:e=>d(e)}),l.a.createElement(x,{checked:i,attributeKey:"sort",attributeLabel:"sorted",setAttribute:e=>o(e)})))};var j=e=>e.value?l.a.createElement("span",{className:"badge badge-dark"},e.true):l.a.createElement("span",{className:"badge badge-light"},e.false);const F=e=>{if(Object(n.useEffect)(()=>{},[e.fields]),!e.fields)return null;const t=Object.keys(e.fields).map((t,a)=>l.a.createElement(J,{key:a,fieldName:t,fieldProperties:e.fields[t],selectedField:e.selectedField,doSelectField:t=>e.doSelectField(t)}));return l.a.createElement("table",{className:"table table-hover table-sm table-striped table-light"},l.a.createElement("thead",{className:"thead-light"},l.a.createElement("tr",null,l.a.createElement("th",null,"Name"),l.a.createElement("th",null,"Type"),l.a.createElement("th",null,"Analyzer"),l.a.createElement("th",null,"Attributes"))),l.a.createElement("tbody",null,t))},J=e=>e.selectedField===e.fieldName?l.a.createElement("tr",{className:"table-active",onClick:()=>e.doSelectField(e.fieldName)},l.a.createElement(C,{fieldName:e.fieldName,fieldProperties:e.fieldProperties})):l.a.createElement("tr",{onClick:()=>e.doSelectField(e.fieldName)},l.a.createElement(C,{fieldName:e.fieldName,fieldProperties:e.fieldProperties})),C=e=>l.a.createElement(l.a.Fragment,null,l.a.createElement("td",{className:"p-1 m-0"},e.fieldName),l.a.createElement("td",{className:"p-1 m-0 text-lowercase"},e.fieldProperties.type),l.a.createElement("td",{className:"p-1 m-0 text-lowercase"},e.fieldProperties.analyzer),l.a.createElement("td",{className:"p-1 m-0"},l.a.createElement(j,{true:"indexed",false:"indexed",value:e.fieldProperties.index}),l.a.createElement(j,{true:"stored",false:"stored",value:e.fieldProperties.stored}),l.a.createElement(j,{true:"sorted",false:"sorted",value:e.fieldProperties.sort}),l.a.createElement(j,{true:"facet",false:"facet",value:e.fieldProperties.facet})));var V=e=>{const[t,a]=Object(n.useState)(null),[s,c]=Object(n.useState)(null),[r,d]=Object(n.useState)(!1),[i,m]=Object(n.useState)({}),[u,E]=Object(n.useState)("");return Object(n.useEffect)(()=>{x()},[e.selectedIndex]),e.selectedIndex?l.a.createElement("div",{className:"border p-0 mt-1 ml-1 bg-light rounded"},l.a.createElement("div",{className:"bg-light text-secondary p-1"},"FIELDS ",l.a.createElement(o,{task:t,error:s,spinning:r})),l.a.createElement(O,{editFieldName:u,setEditFieldName:e=>E(e),selectedField:e.selectedField,doCreateField:(t,a)=>function(t,a){p("Creating field "+t),b(e.oss+"/ws/indexes/"+e.selectedIndex+"/fields/"+t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)},a=>{f("Field created"),E(""),e.setSelectedField(t),x()},e=>f(null,e))}(t,a),doDeleteField:t=>function(t){p("Deleting field "+t),b(e.oss+"/ws/indexes/"+e.selectedIndex+"/fields/"+t,{method:"DELETE"},t=>{f("Field deleted"),e.setSelectedField(null),x()},e=>f(null,e))}(t)}),l.a.createElement(F,{oss:e.oss,fields:i,selectedField:e.selectedField,doSelectField:t=>e.setSelectedField(t)})):null;function x(){const t=e.selectedIndex;t&&(p(),b(e.oss+"/ws/indexes/"+t+"/fields",null,e=>{f(),m(e)},e=>f(null,e.message)))}function p(e){d(!0),e&&(a(e),c(null))}function f(e,t){d(!1),e&&a(e),t?c(t):e&&c(null)}};var P=e=>l.a.createElement("div",{className:"field-view"},l.a.createElement(V,{oss:e.oss,selectedIndex:e.selectedIndex,selectedField:e.selectedField,setSelectedField:e.setSelectedField}));var q=e=>{const[t,a]=Object(n.useState)(null),[s,c]=Object(n.useState)(null),[r,d]=Object(n.useState)(!1);return Object(n.useEffect)(()=>{e.indexJson||m()},[e.selectedIndex]),l.a.createElement("div",{className:"ingest-view"},l.a.createElement("div",{className:"bg-light text-secondary p-1"},"INGEST ",l.a.createElement(o,{task:s,error:t,spinning:r})),l.a.createElement("div",{className:"ingest-editor"},l.a.createElement(E,{value:e.indexJson,setValue:e.setIndexJson})),l.a.createElement("form",{className:"form-inline pr-1 pb-1"},l.a.createElement("div",{className:"pt-1 pl-1"},l.a.createElement("button",{className:"btn btn-outline-primary",onClick:()=>m()},"Generate example")),l.a.createElement("div",{className:"pt-1 pl-1"},l.a.createElement("button",{className:"btn btn-primary",onClick:()=>function(){if(!i())return;a(null),c("Parsing..."),d(!0);var t=null;try{t=function(){const t=e.indexJson;if(null===t||""===t)throw"Nothing to index";return JSON.parse(t)}(),e.setIndexJson(JSON.stringify(t,void 0,2))}catch(e){return a(e.message),c(null),void d(!1)}b(e.oss+"/ws/indexes/"+e.selectedIndex+"/json",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)},e=>{var t;switch(e){case 0:t="Nothing has been indexed.";break;case 1:t="One record has been indexed.";break;default:t=e+" records have been indexed."}c(t),d(!1)},e=>{a(e),c(null),d(!1)})}()},"INDEX"))));function i(){return null!=e.selectedIndex&&""!==e.selectedIndex||(a("Please select an index."),!1)}function m(){i()&&(a(null),c("Collecting sample..."),d(!0),b(e.oss+"/ws/indexes/"+e.selectedIndex+"/json/samples?count=1",{method:"GET"},t=>{e.setIndexJson(JSON.stringify(t,void 0,2)),c(null),d(!1)},e=>{a(e),c(null),d(!1)}))}};var D=e=>{switch(e.selectedView){case"Indices":return l.a.createElement(w,{oss:e.oss,selectedIndex:e.selectedIndex,setSelectedIndex:e.setSelectedIndex,selectedIndexStatus:e.selectedIndexStatus,setSelectedIndexStatus:e.setSelectedIndexStatus});case"Fields":return l.a.createElement(P,{oss:e.oss,selectedIndex:e.selectedIndex,setSelectedIndex:e.setSelectedIndex,indexJson:e.indexJson,setIndexJson:e.setIndexJson,selectedField:e.selectedField,setSelectedField:e.setSelectedField});case"Ingest":return l.a.createElement(q,{oss:e.oss,selectedIndex:e.selectedIndex,setSelectedIndex:e.setSelectedIndex,indexJson:e.indexJson,setIndexJson:e.setIndexJson});case"Query":return l.a.createElement(S,{oss:e.oss,selectedIndex:e.selectedIndex,setSelectedIndex:e.setSelectedIndex,queryJson:e.queryJson,setQueryJson:e.setQueryJson});default:return null}};var T=()=>{const[e]=Object(n.useState)("http://localhost:9090"),[t,a]=Object(n.useState)("Indices"),[s,c]=Object(n.useState)(""),[r,i]=Object(n.useState)({}),[o,m]=Object(n.useState)(""),[u,E]=Object(n.useState)(""),[b,x]=Object(n.useState)(JSON.stringify(JSON.parse('{"query":{"MatchAllDocs": {}},"returned_fields":["*"]}'),void 0,2));return l.a.createElement(l.a.Fragment,null,l.a.createElement(d,{oss:e,selectedIndex:s,selectedView:t,setSelectedView:a}),l.a.createElement("main",{className:"container-fluid main"},l.a.createElement(D,{oss:e,selectedView:t,selectedIndex:s,setSelectedIndex:function(e){c(e),m("")},selectedIndexStatus:r,setSelectedIndexStatus:i,selectedField:o,setSelectedField:m,indexJson:u,setIndexJson:E,queryJson:b,setQueryJson:x})))};Object(s.render)(l.a.createElement(l.a.StrictMode,null,l.a.createElement(T,{className:"test"})),document.getElementById("root"))}},[[14,1,2]]]);